1 REM TANK AMBUSH
10 PRINT"{clear}";TAB(13);"tank ambush":PRINT"{down*7}{space*10}hit any key to start"
15 V=53248:POKE2040,192:POKE2041,193:POKE2042,193:POKE2043,193:POKE2044,193
17 POKEV+39,15:POKEV+40,0:POKEV+41,0:POKEV+42,0:POKEV+43,0
19 POKEV+21,0:POKEV+16,0:FORI=12352TO12414:READQ:POKEI,Q:NEXT:RESTORE
21 FORI=12288TO12350:READQ:POKEI,Q:NEXT
22 POKE12297,0:POKE12300,0:POKE12290,16:POKE12293,48:POKE12296,96:POKE12299,192
24 POKE12302,128
26 POKE2045,194:POKEV+44,7
28 FORI=12416TO12437STEP3:READQ:POKEI,Q:POKEI+1,0:POKEI+2,0:NEXT
30 FORI=12440TO12478:POKEI,0:NEXT
35 POKE53276,PEEK(53276)OR64:POKEV+45,1:POKEV+37,8:POKEV+38,7:POKE2046,195
37 FORI=12480TO12542:READQ:POKEI,Q:NEXT
40 GETX$:IFX$=""THEN40
50 PRINT"{clear}":POKE53280,0:POKE53281,0
55 FORI=55296TO55375:POKEI,11:NEXT
56 FORI=1024TO1343:IFRND(0)<.05THENPOKEI,46
57 NEXT
58 FORI=55296TO55615:POKEI,3:NEXT
60 POKEV,23:POKEV+1,120:POKEV+21,1
65 FORI=1864TO1903:POKEI,45:POKEI+54272,3:NEXT
67 PRINT"{home}{down*22}{cyan}{space*9}angle{space*10}shell";"{home}"
70 M$="ready{space*11}":GOSUB1000
71 POKEV+2,240:POKEV+3,INT(RND(1)*40+130):POKEV+16,PEEK(V+16)AND253
72 POKEV+4,0:POKEV+16,PEEK(V+16)OR28:POKEV+5,PEEK(V+3)-25
73 POKEV+6,25:POKEV+7,PEEK(V+3):POKEV+8,35:POKEV+9,PEEK(V+3)+30
74 POKEV+21,PEEK(V+21)OR30:LT=1
79 FORI=1464TO1824STEP40:FORJ=0TO6:POKEI+J,160:POKEI+J+54272,9:NEXT:NEXT
80 IF(PEEK(V+21)AND32)=0ORFL=1THEN95
85 GOSUB150
87 J=0:CO=PEEK(V+30):IF(COAND32)=0THEN95
88 IF(COAND1)=1THEN95
89 FORI=1TO4:IF(COAND2^I)<>0THENJ=I
90 NEXT:IFJ=0THEN95
92 GOSUB300:IF(PEEK(V+21)AND30)=0THEN500
95 GOSUB200
100 IF(PEEK(V+21)AND32)=32THEN85
102 GETX$:IFX$=""ORFL=1THEN80
105 IFX$=" "THENM$="flare{space*4}":GOSUB1000:FL=1:A=PI/5:SH=9:GOSUB150:GOTO80
110 IFX$<"0"ORX$>"9"THEN100
115 K1=VAL(X$):POKE1920,K1+48
117 GETX$:IFX$=""THENGOSUB200:GOTO117
120 IFX$<"0"ORX$>"9"THEN117
122 A=10*K1+VAL(X$):POKE1921,VAL(X$)+48:A=A*PI/180
136 GETX$:IFX$=""THENGOSUB200:GOTO136
138 IFX$<"0"ORX$>"9"THEN136
140 SH=VAL(X$):POKE1934,SH+48:POKE56206,3
142 FL=0
145 GETX$:IFX$=""THENGOSUB200:GOTO145
147 IFX$=" "THENM$="fire{space*5}":GOSUB1000:GOSUB150:GOTO80
149 GOTO145
150 T=T+4:XI=SH*COS(A)/1.5:YI=SH*SIN(A)/1.5
152 IF(PEEK(V+21)AND32)<>0THEN155
153 POKEV+10,28:POKEV+16,PEEK(V+16)AND223:POKEV+11,122:POKEV+21,PEEK(V+21)OR32
154 GOSUB1020
155 X=INT(28+T*XI)
160 Y=INT(122-T*YI+.049*T*T)
162 IFX<10ORX>320ORY<10ORY>215THENGOSUB400:RETURN
165 IFX>255THENPOKEV+10,X-256:POKEV+16,PEEK(V+16)OR32:GOTO170
168 POKEV+10,X:POKEV+16,PEEK(V+16)AND223
170 POKEV+11,Y
175 IFFL=0THEN185
177 IFT>=30THEN250
185 RETURN
200 LT=LT+1:IFLT=5THENLT=1
210 IF(PEEK(V+21)AND2^LT)=0THENRETURN
215 K=PEEK(V+2*LT)+(2^(8-LT))*(PEEK(V+16)AND2^LT)
220 IFK<256ORK>261THEN225
222 POKEV+2*LT,K-6:POKEV+16,PEEK(V+16)AND(255-2^LT):GOTO230
225 POKEV+2*LT,PEEK(V+2*LT)-6
227 IFPEEK(V+2*LT)<55AND(PEEK(V+16)AND2^LT)=0THEN600
230 RETURN
250 POKEV+21,PEEK(V+21)AND223:FORK1=1TO20:POKE53281,1:FORT=1TO20:NEXT
260 POKE53281,0:NEXT:M$="ready{space*3}":GOSUB1000:FL=0:T=0:POKE1920,32:POKE1921,32
270 POKE1934,32:RETURN
300 POKEV+12,PEEK(V+10):POKEV+13,PEEK(V+11)-5:POKEV+21,PEEK(V+21)AND223
305 POKE2040+J,195:POKE2046,193:POKEV+28,PEEK(V+28)OR2^J
307 POKEV+28,PEEK(V+28)AND191:POKEV+39+J,1:POKEV+45,0
310 POKEV+21,PEEK(V+21)OR64:IF(PEEK(V+16)AND32)=32THENPOKEV+16,PEEK(V+16)OR64
320 GOSUB1020:POKE53281,1:FORK=1TO500:NEXT:POKE53281,0:FORK=1TO200:NEXT
325 SC=SC+50:POKEV+21,PEEK(V+21)AND(191-2^J):POKEV+30,PEEK(V+30)AND(191-2^J)
330 M$="ready{space*15}":GOSUB1000
335 POKE1920,32:POKE1921,32:POKE1934,32
340 POKEV+10,28:POKEV+16,PEEK(V+16)AND223:POKEV+11,122:T=0
345 POKE2040+J,193:POKE2046,195:POKEV+28,PEEK(V+28)AND(255-2^J)
347 POKEV+28,PEEK(V+28)OR64:POKEV+39+J,0:POKEV+45,1
350 RETURN
400 POKEV+12,PEEK(V+10):POKEV+13,PEEK(V+11):POKEV+21,PEEK(V+21)AND223
410 POKEV+21,PEEK(V+21)OR64:IF(PEEK(V+16)AND32)=32THEN415
412 POKEV+16,PEEK(V+16)AND191:GOTO420
415 POKEV+16,PEEK(V+16)OR64
420 GOSUB1020
425 POKEV+21,PEEK(V+21)AND191:M$="ready{space*14}":GOSUB1000
427 POKE1920,32:POKE1921,32:POKE1934,32
430 POKEV+10,28:POKEV+16,PEEK(V+16)AND223:POKEV+11,122:T=0:RETURN
500 RN=RN+1:IFRN>1THEN510
502 POKEV+2,210:POKEV+4,226:POKEV+6,251:POKEV+8,5:POKEV+16,PEEK(V+16)AND248
504 POKEV+16,PEEK(V+16)OR16
506 GOTO530
510 IFRN>2THEN520
512 POKEV+2,180:POKEV+4,196:POKEV+6,221:POKEV+8,231:POKEV+16,PEEK(V+16)AND232
516 GOTO530
520 POKEV+2,150-4*RN:POKEV+4,166-RN:POKEV+6,191-RN:POKEV+8,201-RN
522 POKEV+16,PEEK(V+16)AND232
530 POKEV+3,INT(RND(0)*40+130):POKEV+5,PEEK(V+3)-25:POKEV+7,PEEK(V+3)
535 POKEV+9,PEEK(V+3)+30
540 POKEV+21,PEEK(V+21)OR30:LT=1
550 GOTO80
600 PRINT"{clear}{space*15}{reverse on}{yellow}game over{reverse off}":PRINT:PRINT:POKEV+21,0
610 PRINT"your score is ";SC
620 END
1000 PRINT"{reverse on}{home}{down*24}";M$;TAB(25);"score: ";SC;"{reverse off}{home}"
1010 RETURN
1020 S=54272:FORL=0TO24:POKES+L,0:NEXT
1022 VL=54296:W=54276:AT=54277:H=54273:L=54272
1025 FORK=15TO0STEP-2:POKEVL,K:POKEW,129:POKEAT,15:POKEH,40
1030 POKEL,200:NEXT
1040 POKEW,0:POKEAT,0:RETURN
1050 RETURN
10000 DATA 0,60,0,0,60,0,0,255,0,255,255,0,255,255,0,0,255,0,0,255,0,63,255,252
10010 DATA127,255,254,127,255,254,102,102,102,127,255,254,127,255,254,63,255,252
10020 DATA31,255,248,15,255,240,7,255,224,3,255,192,0,0,0,0,0,0,0,0,0
10030 DATA24,60,60,126,126,60,60,24
10040 DATA36,27,32,0,64,4,8,137,2,0,6,64,174,39,172,3,92,137,35,190,192
10050 DATA13,127,62,67,255,192,40,255,64,32,255,109,45,255,0,0,255,192,185
10060 DATA126,154,0,28,192,129,167,188,48,25,65,64,198,100,14,0,0,0,105
10070 DATA200,60,8,97
