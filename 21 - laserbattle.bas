1 REM LASER BATTLE
5 FORS=54272TO54296:POKES,0:NEXT
10 POKE53280,6:POKE53281,13:PRINT"{clear}{black}{space*14}laser battle"
15 PRINT"{down*11}{space*10}hit any key to start"
17 NM=3:V=53248:POKEV+21,0:POKE2040,192:POKEV+39,3:POKEV,0:POKEV+37,7
20 POKEV+38,8:POKEV+1,0:POKEV+16,0:POKEV+29,1
22 FORI=12288TO12350:READQ:POKEI,Q:NEXT
24 FORI=12352TO12414:J=INT(2^(RND(0)*7))-1:POKEI,J:NEXT
30 FORI=49157TO49244:READQ:POKEI,Q:NEXT
45 GETX$:IFX$=""THEN45
50 PRINT"{clear}";:POKE53280,0:POKE53281,0
52 FORI=1784TO1823:POKEI,102:NEXT
54 FORI=1904TO1943:POKEI,64:POKEI+54272,7:NEXT
56 POKE1867,90:POKE1883,90:POKE1900,90:POKE56139,2:POKE56155,2:POKE56172,2
58 PG=19:POKE1843,113:GOSUB1000
60 X=PEEK(197):IFX=60THENGOSUB150
62 IFX=33ORX=41THENGOSUB100
63 IFPH=2THENGOSUB400
65 IFPH=0THENGOSUB220:GOTO70
67 GOSUB250
70 X=PEEK(197):IFX=60THENGOSUB150
72 IFX=33ORX=41THENGOSUB100
73 IFRND(1)<.01ANDPH=1THENPH=2
75 IFPH=0THEN80
77 IFRND(1)<.8ORPH=2THEN80
78 GOSUB190
80 IFPEEK(1824+PG)<>113THEN500
90 GOTO60
100 IFPG=0ANDX=33THENRETURN
105 IFPG=39ANDX=41THENRETURN
110 IFX=33THENI=-1:GOTO120
115 I=1
120 POKEPG+1824,32:PG=PG+I:POKEPG+1824,113:POKEPG+56096,3:RETURN
150 POKE49152,PG:POKE49154,18:POKE49202,66:POKE49217,1
152 POKE54296,15:POKE54277,190:POKE54276,17
153 POKE54273,17:POKE54272,37:POKE54278,248
155 SH=0:J=0:FORI=1TO4:IFGS(I,1)=PGTHENJ=I
156 NEXT
157 IFJ<>0THENSP=GS(J,2):POKE49153,SP:SH=2:GOTO165
160 M=PEEK(V)+256*(PEEK(V+16)AND1):P=PG*8+23
162 IFM<P-22OR M>P-18 OR PEEK(V+21)=0THENSP=0:POKE49153,SP:GOTO165
163 SH=1:SP=2:POKE49153,SP
165 SYS(49157)
170 POKE49202,32:POKE49217,0:POKE49153,SP
175 SYS(49157)
177 IFSH=1THENGOSUB300
178 IFSH=2THENGOSUB350
180 POKE54276,0:RETURN
190 IFGS(1,1)=0ANDGS(2,1)=0ANDGS(3,1)=0ANDGS(4,1)=0THENRETURN
191 POKE49152,PG:POKE49154,18:POKE49202,66:POKE49217,1:POKE54296,15
192 POKE54277,190:POKE54276,17:FG=FG+1:IFFG=5THENFG=1
193 IFGS(FG,1)=0THEN192
194 POKE49152,GS(FG,1):POKE49153,GS(FG,2)+1:POKE49217,1:POKE49202,66
196 IFPEEK(1784+GS(FG,1))=102THENPOKE49154,20:GOTO200
197 IFGS(FG,1)=PGTHENPOKE49154,21:GOTO200
198 K=GS(FG,1):IFK=3ORK=19ORK=36THENPOKE49154,22:SYS(49157):GOTO500
199 POKE49154,20
200 SYS(49157)
202 X=PEEK(197):IFX=42ORX=50THENGOSUB100
206 POKE49202,32:POKE49217,0:POKE49153,GS(FG,2)+1
208 SYS(49157)
210 POKE54276,0:RETURN
220 IFGS(1,1)<>0THEN225
221 I=INT(RND(1)*39+1):IFI=GS(2,1)ORI=GS(3,1)ORI=GS(4,1)THEN221
222 GS(1,1)=I:GS(1,2)=0:POKE1024+I,42:POKE55296+I,7:RETURN
225 IFGS(2,1)<>0THEN230
226 I=INT(RND(1)*39+1):IFI=GS(1,1)ORI=GS(3,1)ORI=GS(4,1)THEN226
227 GS(2,1)=I:GS(2,2)=0:POKE1024+I,42:POKE55296+I,7:RETURN
230 IFGS(3,1)<>0THEN235
231 I=INT(RND(1)*39+1):IFI=GS(1,1)ORI=GS(2,1)ORI=GS(4,1)THEN231
232 GS(3,1)=I:GS(3,2)=0:POKE1024+I,42:POKE55296+I,7:RETURN
235 IFGS(4,1)<>0THEN240
236 I=INT(RND(1)*39+1):IFI=GS(1,1)ORI=GS(2,1)ORI=GS(3,1)THEN236
237 GS(4,1)=I:GS(4,2)=0:POKE1024+I,42:POKE55296+I,7:RETURN
240 IFGS(1,3)=1ANDGS(2,3)=1ANDGS(3,3)=1ANDGS(4,3)=1THENPH=1:RETURN
242 I=INT(RND(1)*4+1):IFGS(I,3)=1THEN242
243 POKEGS(I,1)+40*GS(I,2)+1024,32:GS(I,2)=GS(I,2)+1
244 POKEGS(I,1)+40*GS(I,2)+1024,42:POKEGS(I,1)+40*GS(I,2)+55296,7
246 IFRND(1)<.3ORGS(I,2)>=10THENGS(I,3)=1
248 RETURN
250 IFPEEK(V+21)<>0THEN255
252 IFRND(1)<.95THENRETURN
253 MC=2:POKEV,25:POKEV+1,50:POKEV+21,1:POKEV+16,0:RETURN
255 IFPEEK(V)=253THENPOKEV,0:POKEV+16,1:GOTO260
257 POKEV,PEEK(V)+3
260 IFPEEK(V)>=50ANDPEEK(V+16)=1THENPOKEV+21,0:RETURN
263 I=PEEK(V)+256*(PEEK(V+16)AND1):MC=INT((I-23)/8)+3
265 IFRND(1)<.55THENRETURN
270 IFMC<>GS(1,1)ANDMC<>GS(2,1)ANDMC<>GS(3,1)ANDMC<>GS(4,1)THENGOSUB280
275 RETURN
280 POKE54296,15:POKE54276,129:POKE54277,15:POKE54273,40:POKE54272,200
282 POKE49152,MC:POKE49153,2:POKE49217,1:POKE49202,66
284 IFPEEK(1784+MC)=102THENPOKE49154,20:GOTO290
287 IFMC=PGTHENPOKE49154,21:GOTO290
288 IFMC=3ORMC=19ORMC=36THENPOKE49154,22:SYS(49157):GOTO500
289 POKE49154,20
290 SYS(49157)
292 X=PEEK(197):IFX=42ORX=50THENGOSUB100
296 POKE49202,32:POKE49217,0:POKE49153,2
298 SYS(49157)
299 POKE54276,0:RETURN
300 SC=SC+50:GOSUB1000:POKEV+39,7:POKE2040,193:GOSUB700:POKE54296,0
310 FORT=1TO500:NEXT
315 POKEV+21,0:POKEV+39,3:POKE2040,192
340 RETURN
350 POKE1024+GS(J,1)+GS(J,2)*40,102:POKEGS(J,1)+GS(J,2)*40+55296,8
355 SC=SC+10:GOSUB1000
356 FORT=1TO100:NEXT
357 POKE1024+GS(J,1)+GS(J,2)*40,32:GS(J,1)=0
360 RETURN
400 IFGS(1,1)<>0ORGS(2,1)<>0ORGS(3,1)<>0ORGS(4,1)<>0THEN405
402 FORI=1TO4:GS(I,3)=0:NEXT:PH=0:RETURN
405 I=INT(RND(1)*4+1):IFGS(I,1)=0THEN405
407 POKE1024+GS(I,1)+GS(I,2)*40,32:IFGS(I,2)>0THENGS(I,2)=GS(I,2)-1
410 POKE1024+GS(I,1)+GS(I,2)*40,42:POKEGS(I,1)+GS(I,2)*40+55296,7
412 IFGS(I,2)=0THENPOKE1024+GS(I,1),32:GS(I,1)=0
415 RETURN
500 IFPEEK(1824+PG)=113THEN560
502 POKEV+40,0:POKEV+28,2
504 POKE2041,193:K=PG*8+15:IFK>255THENPOKEV+2,K-256:POKEV+16,2:GOTO506
505 POKEV+16,PEEK(V+16)AND253:POKEV+2,K
506 POKEV+3,200:POKEV+21,3:GOSUB700
508 POKE54276,0:POKE54277,0
509 FORT=1TO1000:NEXT:POKE2040,192:POKEV+21,0:POKEV+39,3:POKE54296,0
510 POKE53280,6:POKE53281,13:PRINT"{clear}{black}{space*14}laser battle":PRINT
515 NM=NM-1:IFNM=0THEN600
520 PRINT"you have ";NM;" men left":PRINT
530 FORT=1TO3000:NEXT
535 FORI=1TO4:GS(I,1)=0:NEXT:PH=0
550 GOTO50
560 FORI=1TO3:POKE53280,INT(RND(1)*10)+23:GOSUB700:NEXT:POKEV+21,0
565 POKE53280,6:POKE53281,13:PRINT"{clear}{black}{space*14}laser battle":PRINT
570 GOTO515
600 PRINT"{space*16}game over":PRINT
620 PRINT"your score was ";SC
625 POKEV+21,0:POKE54296,0
630 GETX$:IFX$=""THENEND
640 GOTO630
700 FORX=15TO0STEP-1:POKE54296,X:POKE54276,129
705 POKE54277,15:POKE54273,40:POKE54272,200:NEXT
710 RETURN
1000 PRINT"{home}{down*24}{space*3}{cyan}score: ";SC;"{home}"
1005 RETURN
10000 DATA0,126,0,192,255,3,193,255,131,195,255,195,199,255,227,207,255,243
10010 DATA207,255,243,207,255,243,204,230,51,252,230,63,252,230,63,207,255,243
10020 DATA207,255,243,207,255,243,199,255,227,195,255,195,192,127,3
10030 DATA0,62,0,0,28,0,0,28,0,0,28,0
10100 DATA24,173,0,192,133,178,169,4,133,179,173,1,192,141,3,192,169,0,205,3
10110 DATA192,240,19,206,3,192,24,165,178,105,40,133,178,165,179,105,0,133,179
10120 DATA76,21,192,160,0,169,93,145,178,24,165,178,133,180,165,179,105,212
10130 DATA133,181,169,1,145,180,238,1,192,24,165,178,105,40,133,178,165,179,105
10140 DATA0,133,179,173,1,192,205,2,192,208,211,96
